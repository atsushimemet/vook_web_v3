<% set_meta_tags(
     title: "#{@magazine.title} | Vook", description: @magazine.summary,
     og: {
       title: "#{@magazine.title} | Vook",
       description: @magazine.summary,
       image: @magazine.thumbnail.present? ? rails_blob_url(@magazine.thumbnail) : image_url('vook-ogp.png')
     },
     twitter: {
       image: @magazine.thumbnail.present? ? rails_blob_url(@magazine.thumbnail) : image_url('vook-ogp.png')
     }
   ) %>

<section class='magazine-section'>
  <%= render partial: 'shared/section_headline', locals: { number: '01', title: 'Magazine' } %>
  <div class='magazine-container container'>
    <h2 class='magazine-title'>
      <%= @magazine.title %>
    </h2>
    <div class='magazine-header'>
      <%= l @magazine.publish_at, format: :date %>
    </div>
    <div class='magazine-content'>
      <% if @magazine.thumbnail.attached? %>
        <figure class='image'>
          <%= image_tag @magazine.thumbnail.variant(resize_to_limit: [1000, 1000]) %>
        </figure>
      <% end %>
      <div class='magazine-body content'>
        <%= @magazine.body %>
      </div>
    </div>
    <% if admin_login? %>
      <div class='magazine-edit buttons'>
        <%= link_to '記事編集', edit_magazine_path(@magazine), class: 'button' %>
        <%= button_to '記事削除', @magazine,
                      { method: :delete, data: { turbo_confirm: '本当に削除しますか？' }, class: 'button' } %>
      </div>
    <% end %>
    <%= render 'shared/share_banner', share_text: @magazine.title %>
    <%= link_to 'Magazine一覧に戻る', magazines_path %>
  </div>
</section>
